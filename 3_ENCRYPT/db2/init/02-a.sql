CREATE TABLE fields (
    id           SERIAL PRIMARY KEY,
    code         TEXT UNIQUE NOT NULL,         -- внутренний код/номер поля
    name         TEXT,                          -- человекочитаемое имя
    area_ha      NUMERIC(7,2),                  -- площадь, га
    lat          NUMERIC(9,6),                  -- широта
    lon          NUMERIC(9,6),                  -- долгота
    soil_type    TEXT,                          -- тип почвы (чернозём, суглинок и т.п.)
    soil_texture TEXT,                          -- грансостав (песчаная, суглинистая…)
    ph           NUMERIC(3,1),                  -- pH (актуальный/референсный)
    humus_pct    NUMERIC(4,2),                  -- % гумуса
    irrigated    BOOLEAN DEFAULT FALSE,         -- есть ли орошение
    notes        TEXT
);

-- Демоданные для полей (код совпадает с номером поля в экспериментах)
INSERT INTO fields (code, name, area_ha, lat, lon, soil_type, soil_texture, ph, humus_pct, irrigated, notes) VALUES
('1',  'Поле 1',  12.50, 55.010000, 82.010000, 'чернозём', 'суглинистая', 6.5, 3.20, FALSE, 'демо'),
('2',  'Поле 2',  15.30, 55.020000, 82.020000, 'чернозём', 'суглинистая', 6.4, 3.10, FALSE, 'демо'),
('3',  'Поле 3',  10.00, 55.030000, 82.030000, 'суглинок', 'супесчаная',  6.2, 2.80, FALSE, 'демо'),
('4',  'Поле 4',  18.75, 55.040000, 82.040000, 'чернозём', 'суглинистая', 6.6, 3.40, TRUE,  'демо'),
('5',  'Поле 5',  21.10, 55.050000, 82.050000, 'чернозём', 'суглинистая', 6.7, 3.60, FALSE, 'демо'),
('6',  'Поле 6',   9.80, 55.060000, 82.060000, 'суглинок', 'супесчаная',  6.1, 2.70, FALSE, 'демо'),
('7',  'Поле 7',  13.40, 55.070000, 82.070000, 'чернозём', 'суглинистая', 6.5, 3.10, FALSE, 'демо'),
('8',  'Поле 8',  16.20, 55.080000, 82.080000, 'чернозём', 'суглинистая', 6.6, 3.30, TRUE,  'демо'),
('9',  'Поле 9',  11.50, 55.090000, 82.090000, 'суглинок', 'супесчаная',  6.0, 2.60, FALSE, 'демо'),
('10', 'Поле 10', 19.90, 55.100000, 82.100000, 'чернозём', 'суглинистая', 6.7, 3.50, FALSE, 'демо')
ON CONFLICT (code) DO NOTHING;
